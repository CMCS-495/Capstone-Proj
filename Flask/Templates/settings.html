{# templates/settings.html #}
{% extends 'base.html' %}

{% block title %}Settings{% endblock %}

{% block content %}
<div class="container">
  <h1>Game Settings</h1>
  <form method="post" action="{{ url_for('settings') }}">
    <label>
      Difficulty:
      <select name="difficulty">
        <option value="Easy"   {% if current=='Easy'   %}selected{% endif %}>Easy</option>
        <option value="Normal" {% if current=='Normal' %}selected{% endif %}>Normal</option>
        <option value="Hard"   {% if current=='Hard'   %}selected{% endif %}>Hard</option>
      </select>
    </label>
    <label style="margin-left:1rem;">
      <input type="checkbox" id="music-toggle" name="music" {% if music_enabled %}checked{% endif %}> Music
    </label>
    <div class="button-row">
      <button type="submit" class="button">Save Settings</button>
      <a class="button" href="{{ url_for('menu') }}">‚Üê Back</a>
    </div>
  </form>
</div>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const toggle = document.getElementById('music-toggle');
    const stored = localStorage.getItem('bgmEnabled');
    if (stored === null) {
      toggle.checked = {{ 'true' if music_enabled else 'false' }};
    } else {
      toggle.checked = stored !== 'false';
    }
    window.setBgmEnabled(toggle.checked);
    toggle.addEventListener('change', () => {
      window.setBgmEnabled(toggle.checked);
    });
  });
</script>
{% endblock %}
