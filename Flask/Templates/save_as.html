<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Save Game Asâ€¦</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
  </head>
  <body>
    <div class="container">
      <h1>Save Game Asâ€¦</h1>
      <form method="post">
        <label>
          Filename:<br>
          <input
            type="text"
            name="filename"
            value="{{ default_name }}"
            required
          >
        </label>
        <p><small>Your save will download as this name.</small></p>

        <div class="button-row">
          <button type="submit">ğŸ’¾ Download Save</button>
          <!-- Use a link styled as a button to go back -->
          <a class="button" href="{{ url_for('explore') }}">â† Back</a>
        </div>
      </form>
    </div>
    <script>
  // On any form submit or button click, immediately navigate to /loading
  document.addEventListener('DOMContentLoaded', () => {
    const goLoading = event => {
      // let the click/submit still fire, but show loading screen
      location.href = "/loading";
    };

    // intercept all submits
    document.querySelectorAll('form').forEach(f => {
      f.addEventListener('submit', goLoading);
    });

    // intercept all button clicks that would reload the page
    document.querySelectorAll('button').forEach(b => {
      b.addEventListener('click', goLoading);
    });

    // intercept all link clicks
    document.querySelectorAll('a').forEach(a => {
      a.addEventListener('click', e => {
        // only internal game links
        if (a.getAttribute('href').startsWith("/")) {
          goLoading();
        }
      });
    });
  });
</script>
  </body>
</html>
